<div *ngIf="userProfile.username">
    <h2 class="heading">Profile</h2>
  <!-- info icon -->
<!--  <span class="info-icon"-->
<!--        (click)="showInfo = !showInfo"-->
<!--        title="More info">-->
<!--      &lt;!&ndash; simple SVG ‘i’ in a circle &ndash;&gt;-->
<!--      <svg width="18" height="18" viewBox="0 0 24 24" fill="none">-->
<!--        <circle cx="12" cy="12" r="10" stroke="#3f7df6" stroke-width="2"/>-->
<!--        <line x1="12" y1="8" x2="12" y2="12.5" stroke="#3f7df6" stroke-width="2" stroke-linecap="round"/>-->
<!--        <circle cx="12" cy="16" r="1.3" fill="#3f7df6"/>-->
<!--      </svg>-->
<!--      </span>-->

  <!-- ========= VIEW MODE (cards) ========= -->
  <section *ngIf="!isEditing" class="profile-cards">
<!--    <div *ngIf="biometricsIncomplete" class="info-note">-->
<!--      <h4>Add your biometrics for a more accurate strength-match…</h4>-->
<!--    </div>-->
    <!-- card grid -->

    <div class="card-grid">

      <!-- USERNAME (always present) -->
      <div class="card">
        <div class="label">Username</div>
        <div class="value">{{ userProfile.username }}</div>
      </div>

      <!-- EMAIL -->
      <div class="card">
        <div class="label">Email</div>
        <div class="value">{{ userProfile.email }}</div>
      </div>

      <!-- UNITS (optional badge) -->
      <div class="card" [ngClass]="{ missing: !userProfile.preferredUnitSystem }">
        <div class="label">
          Preferred Units
        </div>
        <div class="value">
          {{ userProfile.preferredUnitSystem ? getUnitLabel(userProfile.preferredUnitSystem) : '??' }}
        </div>
      </div>

      <!-- GENDER -->
      <div class="card" [ngClass]="{ missing: !userProfile.gender }">
        <div class="label">Gender</div>
        <div class="value">
          {{ userProfile.gender ? getGenderLabel(userProfile.gender) : '??' }}
        </div>
      </div>

      <!-- AGE -->
      <div class="card" [ngClass]="{ missing: !userProfile.age }">
        <div class="label">Age</div>
        <div class="value">{{ userProfile.age || '??' }}</div>
      </div>

      <!-- WEIGHT -->
      <div class="card" [ngClass]="{ missing: !userProfile.weight }">
        <div class="label">
          Weight
        </div>
        <div class="value">{{ userProfile.weight || '??' }}</div>
      </div>

      <!-- HEIGHT -->
      <div class="card" [ngClass]="{ missing: !userProfile.height }">
        <div class="label">
          Height
        </div>
        <div class="value">{{ userProfile.height || '??' }}</div>
      </div>

    </div>
    <!-- end card-grid -->

<!--    <div class="info-note">-->
<!--      Add your biometrics for a more accurate strength-match...-->
<!--    </div>-->

    <!-- edit button row -->
    <div class="btn-row-right">
      <!-- Edit button stays the same -->
      <button class="edit-btn btn" (click)="isEditing = true">Edit Profile</button>

      <!-- pop-up: *only* when biometrics are incomplete and showInfo is true -->
<!--      <div *ngIf="biometricsIncomplete && showInfo"-->
<!--           class="info-pop"-->
<!--           (clickOutside)="showInfo = false">        &lt;!&ndash; auto-close on outside &ndash;&gt;-->
<!--        Optional — add biometrics for a more accurate strength-match.-->
<!--      </div>-->
    </div>

  </section>

  <!-- ========= EDIT MODE ========= -->
  <form *ngIf="isEditing"
        class="profile-cards"
        (ngSubmit)="updateUser()"
        #editForm="ngForm">

    <!-- simple input grid -->
    <div class="card-grid">

      <div class="card">
        <label>
          <span class="label">Username</span>
          <input class="value form-control" type="text" [(ngModel)]="updatedProfile.username" name="username">
        </label>
      </div>

      <div class="card">
      <label>
        <span class="label">Email</span>
        <input class="value form-control" type="email" [(ngModel)]="updatedProfile.email" name="email">
      </label>
      </div>

      <div class="card">
        <label>
          <span class="label">Preferred Units</span>
          <select class="value form-control" [(ngModel)]="updatedProfile.preferredUnitSystem" name="units">
            <option class="value" value="" disabled selected hidden>Select unit system</option>
            <option class="value" *ngFor="let u of unitOptions" [value]="u.value">
              {{ u.label }}
            </option>
          </select>
        </label>
      </div>


      <div class="card">
        <label>
          <span class="label">Gender</span>
          <select class="value form-control"[(ngModel)]="updatedProfile.gender" name="gender">
            <option class="value" value="" disabled selected hidden>Select gender</option>
            <option class="value" *ngFor="let g of genderOptions" [value]="g.value">
              {{ g.label }}
            </option>
          </select>
        </label>
      </div>

      <div class="card">
        <label>
          <span class="label">Age</span>
          <input class="value form-control" type="number" [(ngModel)]="updatedProfile.age" name="age">
        </label>
      </div>

      <div class="card">
        <label>
          <span class="label">Weight</span>
          <input class="value form-control" type="number" [(ngModel)]="updatedProfile.weight" name="weight">
        </label>
      </div>

      <div class="card">
        <label>
          <span class="label">Height</span>
          <input class="value form-control" type="number" [(ngModel)]="updatedProfile.height" name="height">
        </label>
      </div>
    </div>

    <div class="btn-row">
      <button type="submit" class="btn primary">Save</button>
      <button type="button" class="btn" (click)="isEditing = false">Cancel</button>
    </div>
  </form>

</div>
